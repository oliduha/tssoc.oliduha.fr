<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="description" content="Docs formation Cefim TSSR">
    <meta name="author" content="Olivier Duhamel">
    <title>WDS - MDT - TSSOC</title>
    <link href="https://www.tssoc.oliduha.fr/at3/at3e1/wds-mdt/index.html" rel="canonical" type="text/html" title="WDS - MDT - TSSOC">
    <link href="../../../at3/at3e1/wds-mdt/index.xml" rel="alternate" type="application/rss+xml" title="WDS - MDT - TSSOC">
    <link href="../../../images/logo.svg" rel="icon" type="image/svg+xml">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="../../../css/fontawesome-all.min.css" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css" rel="stylesheet">
    <link href="../../../css/auto-complete.css" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="../../../css/fonts.css" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css" rel="stylesheet">
    <link href="../../../css/theme-auto.css" rel="stylesheet" id="variant-style">
    <link href="../../../css/variant.css" rel="stylesheet">
    <link href="../../../css/print.css" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css" rel="stylesheet">
    <link href="../../../css/ie.css" rel="stylesheet">
    <script src="../../../js/url.js"></script>
    <script src="../../../js/variant.js"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="../../../index.search.js";
      var root_url="../../../";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copier dans le presse-papiers';
      window.T_Copied_to_clipboard = 'Copié dans le presse-papiers !';
      window.T_Copy_link_to_clipboard = 'Copier le lien dans le presse-papiers';
      window.T_Link_copied_to_clipboard = 'Lien copié dans le presse-papiers !';
      window.T_No_results_found = 'Aucun résultat trouvé pour \u0022{0}\u0022';
      window.T_N_results_found = '{1} résultats trouvés pour \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/www.tssoc.oliduha.fr/';
      window.variants && variants.init( [ 'auto', 'relearn-bright', 'relearn-light', 'relearn-dark', 'learn', 'neon', 'blue', 'green', 'red' ] );
    </script>
    <style>
      #body img.bg-white {
        background-color: white;
      }
    </style>
  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../at3/at3e1/wds-mdt/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../index.html"><span itemprop="name">TSSOC</span></a><meta itemprop="position" content="1"> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../at3/index.html"><span itemprop="name">Maintenir et exploiter une infrastructure distribuée et contribuer à sa sécurisation</span></a><meta itemprop="position" content="2"> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../../at3/at3e1/index.html"><span itemprop="name">Configurer serveur de déploiement et de terminaux légers</span></a><meta itemprop="position" content="3"> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">WDS - MDT</span><meta itemprop="position" content="4"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">
          <div id="head-tags">
          </div>
          <article class="chapter">
<div class="article-subheading">Exemple 1</div>
<h1 id="wds---mdt">WDS - MDT</h1>

<hr>
<h1 id="wds">WDS</h1>
<h2 id="window-deployment-system">Window Deployment System</h2>
<p><strong>TP</strong></p>

<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Information</div>
  <div class="box-content">
<p>Avec VMWare :</p>
<ul>
<li>1 VM IPFire avec la carte &ldquo;green&rdquo; sur 192.168.13.0/24 en Host Only côté lan</li>
<li>1 VM Windows Server AD-DS + DHCP en Host Only</li>
<li>1 VM Windows CLient vierge en Host Only</li>
</ul>
  </div>
</div>
<hr>
<h2 id="1---serveur-ad-ds-et-dhcp">1 - Serveur AD-DS et DHCP</h2>

<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Information</div>
  <div class="box-content">
<ul>
<li>Une VM Windows Server 2022 avec :
<ul>
<li>3-4 Go Ram</li>
<li>1 DD 40 GO (C:)</li>
<li>1 DD 60 GO (D:)</li>
<li>Host Only en 192.168.13.250/24 (fixe)</li>
<li>Rôle AD-DS puis</li>
<li>Rôle DHCP puis</li>
<li>Rôle WDS</li>
</ul>
</li>
</ul>
  </div>
</div>
<h3 id="installation-des-rôles">Installation des rôles</h3>
<p>Avant d&rsquo;installer le moindre rôle, on s&rsquo;assure de paramétrer le nom de la machine et sa carte réseau en IP fixe (192.168.13.250/24 ici) et on la reboot.</p>
<p>On installe d&rsquo;abord le rôle AD-DS puis promotion en Domain Controler et configuration d&rsquo;une forêt pour notre réseau local.</p>
<p>Ensuite vient le rôle DHCP et sa configuration.</p>
<p>Et enfin le rôle WDS et sa configuration :</p>
<blockquote>
<p>Durant l&rsquo;installation, à l&rsquo;étape de sélection des services de rôle, bien cocher les 2 options :</p>
<ul>
<li><code>Serveur de déploiement</code><br>
et</li>
<li><code>Serveur de transport</code></li>
</ul>
</blockquote>
<h3 id="configuration-initiale-de-wds">Configuration initiale de WDS</h3>
<ul>
<li>Une fois l&rsquo;installation du rôle WDS achevée, dans le  Gestionnaire de serveur, menu Outils, choisir <strong>Services de déploiement Windows</strong></li>
<li>Cliquer droit sur le serveur pour le configurer (il a une icone d&rsquo;alerte).</li>
<li>La 1ère fenêtre rappelle les prérequis pour le service. <em>Suivant</em></li>
<li>Choisir <strong>Intégré à Active Directory</strong>. <em>Suivant</em></li>
<li>Entrer le chemin où les images seront stoquées. Lui indiquer de créer le dossier <code>RemoteInstall</code> à la racine du disque <strong>D:</strong> <em>Suivant</em></li>
<li>Choisir <strong>Répondre à tous les ordinateurs clients (connus et inconnus)</strong>. <em>Suivant</em></li>
<li>Attentre que la configuration se termine et une nouvelle fenêtre apparaît. Ne pas sélectionner &ldquo;Ajouter les images au serveur maintenant&rdquo; et <em>Terminer</em></li>
</ul>
<p>
<a href="#image-44692a481e18c6ace7fd41475f36a627" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/01_1_Gestionnaire_WDS.png" alt="Gestionnaire_wds" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-44692a481e18c6ace7fd41475f36a627">
<img src="../../../at3/at3e1/wds-mdt/01_1_Gestionnaire_WDS.png" alt="Gestionnaire_wds" class="lightbox-image" loading="lazy">
</a></p>
<h2 id="ajout-dimages">Ajout d&rsquo;images</h2>
<p>Il faut ajouter une image d&rsquo;un Windows qui servira de modèle pour nos futures déploiements :</p>
<ul>
<li>Ouvrir les &ldquo;Settings&rdquo; de la machine virtuelle (dans VMWare) et insérer l&rsquo;iso souhaité dans le lecteur CD-ROm de la VM.</li>
<li>Dans le gestionnaire WDS du serveur, sous le nom de notre serveur : clique droit sur <strong>Images d&rsquo;installation</strong> &gt; <strong>Ajouter une image d&rsquo;installation&hellip;</strong></li>
<li>Créer un groupe d&rsquo;images nommé : <code>nom_du_groupe</code> puis bouton <em>Suivant</em></li>
<li><em>Parcourir</em> puis, dans le dossier <strong>sources</strong> du CD-Rom, sélectionner le fichier <strong>install.wim</strong> et <em>Suivant</em></li>
<li>Si l&rsquo;ISO contient plusieurs versions, sélectionner uniquement celle que l&rsquo;on souhaite en décochant les autres, puis <em>Suivant</em></li>
<li>L&rsquo;assistant nous présente la version choisie, cliquer <em>Suivant</em></li>
<li>Après chargement du fichier, cliquer <em>Terminer</em></li>
</ul>
<p>
<a href="#image-6147f2e87b5fdddf4e8c32504ad4b5c9" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/01_2_Image_Install.png" alt="Image_install_ajoutée" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-6147f2e87b5fdddf4e8c32504ad4b5c9">
<img src="../../../at3/at3e1/wds-mdt/01_2_Image_Install.png" alt="Image_install_ajoutée" class="lightbox-image" loading="lazy">
</a></p>
<ul>
<li>Répéter le même principe pour l&rsquo;image de démarrage qui correspont au fichier <strong>boot.wim</strong> situé dans le même dossier du CD-Rom (pas de groupe ici).</li>
</ul>
<p>
<a href="#image-2e4d0b5fda0e662364aa483ac92a759f" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/01_3_Image_Boot.png" alt="Image_boot_ajoutée" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-2e4d0b5fda0e662364aa483ac92a759f">
<img src="../../../at3/at3e1/wds-mdt/01_3_Image_Boot.png" alt="Image_boot_ajoutée" class="lightbox-image" loading="lazy">
</a></p>

<div class="box notices cstyle note">
  <div class="box-label"><i class="fa-fw fas fa-exclamation-circle"></i> Remarque</div>
  <div class="box-content">
<p>Pour une machine physique, il est possible que l’image de démarrage ne se charge pas du à une erreur de pilote, nous verrons plus loin comment ajouter des drivers aux services WDS et comment les intégrer aux images de démarrage et de capture.</p>
  </div>
</div>
<hr>
<h2 id="2---client-windows-10-vierge">2 - CLient Windows 10 vierge</h2>

<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Information</div>
  <div class="box-content">
<p>Une VM Windows 10 vierge avec :</p>
<ul>
<li>1-2 GO Ram</li>
<li>1 DD de 30 GO</li>
<li>Host Only en DHCP</li>
<li>UEFI <em>(sans problème à partir de WinSrv 2022)</em></li>
<li>Boot en PXE</li>
<li>faire un snapshot pour éviter de recréer une VM pour chacun des tests.</li>
</ul>
  </div>
</div>
<p>Démarrer la machine sans OS ni ISO dans le lecteur CD et attendre qu&rsquo;elle boot en PXE.</p>
<p>Après choix de la langue et authentification (<a href="mailto:user@domaine.lan">user@domaine.lan</a> + mdp), l&rsquo;installation doit démarrer comme avec une version CD ordinaire. Si tout se passe bien l&rsquo;installation se poursuit jusqu&rsquo;à la fin, WDS est fonctionnel !</p>
<hr>
<h2 id="3---optimisation-avec-un-fichier-de-réponses">3 - Optimisation avec un fichier de réponses</h2>
<h5 id="prérequis-">Prérequis :</h5>
<ul>
<li>ADK et son outil WSIM (<strong>Assitant Gestion d&rsquo;Installation</strong>)</li>
<li>Une copie du fichier install.win (l&rsquo;image) de notre version de Windows à configurer</li>
</ul>
<p>
<a href="#image-32e461e8af47901c38ce8ea2eb6fc413" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/02_1_WDSIM.png" alt="Assistant_Gestion_Installation" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-32e461e8af47901c38ce8ea2eb6fc413">
<img src="../../../at3/at3e1/wds-mdt/02_1_WDSIM.png" alt="Assistant_Gestion_Installation" class="lightbox-image" loading="lazy">
</a></p>
<p>Il faut d&rsquo;abord ouvrir une image Windows : <code>Menu Fichier &gt; Sélectionner l'image Windows</code> et indiquer le fichier <strong>install.wim</strong> puis la verion souhaitée et enfin Valider la création du catalogue. La zone en bas à gauche <em>(Image Windows)</em> doit se peupler.</p>
<p>
<a href="#image-23e2dbf3e6b699f73a41bf737081694d" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/02_2_Image_Windows.png" alt="WSIM_image_win" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-23e2dbf3e6b699f73a41bf737081694d">
<img src="../../../at3/at3e1/wds-mdt/02_2_Image_Windows.png" alt="WSIM_image_win" class="lightbox-image" loading="lazy">
</a></p>
<h3 id="créer-un-nouveau-fichier-de-réponse">Créer un nouveau fichier de réponse</h3>
<p><strong>Paramètres régionaux</strong></p>
<p>Ajouter les paramètres amd64_Microsoft-Windows-International-Core-WinPE et configurer les propriétés suivantes :</p>
<ul>
<li>InputLocale : fr-FR</li>
<li>SystemLocale : fr-FR</li>
<li>UILanguage : fr-FR</li>
<li>UserLocale : fr-FR</li>
<li>SeteupUILanguage / UILanguage : fr-FR</li>
</ul>
<p><strong>Crédentials WDS</strong></p>
<p>Ajouter le paramètre WindowsDeploymentServices dans amd64_Microsoft-Windows-Setup et configurer les propriétés suivantes :</p>
<ul>
<li>Login / Credentials / Domain</li>
<li>Login / Credentials / Password</li>
<li>Login / Credentials / username</li>
</ul>
<p><strong>Licence et fuseau horaire</strong></p>
<p>Ajouter le paramètre WindowsDeploymentServices dans amd64_Microsoft-Windows-Shell-Setup et configurer les propriétés suivantes :</p>
<ul>
<li>TimeZone : (GMT+01:00) Brussels, Copenhagen, Madrid, Paris</li>
<li>OOBE / HideEULAPage : true</li>
<li>OOBE / NetworkLocation : Work</li>
<li>OOBE / SkipMachineOOBE : true</li>
<li>OOBE / SkipUserOOBE : true</li>
</ul>
<p><strong>Mot de passe de l’administrateur local</strong></p>
<p>Ajouter les paramètres UserAccounts qui se trouvent dans amd64_Microsoft-Windows-Shell-Setup et configurer les propriétés suivantes :</p>
<ul>
<li>AdministratorPassword / Value : mot de passe</li>
</ul>
<blockquote>
<p>Enregistrer le fichier de réponse en unatended.xml <em>(par exemple)</em></p>
</blockquote>
<p>Fichier de réponse complet :</p>
<p><code>WDS_w10Pro_unatended.xml</code></p>
<p>
<a href="#image-100acb1f587f5a7d11041a580af29839" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/02_3_WSIM_Comolet.png" alt="WSIM_complet" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-100acb1f587f5a7d11041a580af29839">
<img src="../../../at3/at3e1/wds-mdt/02_3_WSIM_Comolet.png" alt="WSIM_complet" class="lightbox-image" loading="lazy">
</a></p>
<p>et son code xml :</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;unattend</span> <span class="na">xmlns=</span><span class="s">&#34;urn:schemas-microsoft-com:unattend&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;settings</span> <span class="na">pass=</span><span class="s">&#34;windowsPE&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&#34;Microsoft-Windows-International-Core-WinPE&#34;</span> <span class="na">processorArchitecture=</span><span class="s">&#34;amd64&#34;</span> <span class="na">publicKeyToken=</span><span class="s">&#34;31bf3856ad364e35&#34;</span> <span class="na">language=</span><span class="s">&#34;neutral&#34;</span> <span class="na">versionScope=</span><span class="s">&#34;nonSxS&#34;</span> <span class="na">xmlns:wcm=</span><span class="s">&#34;http://schemas.microsoft.com/WMIConfig/2002/State&#34;</span> <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;SetupUILanguage&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;UILanguage&gt;</span>fr-FR<span class="nt">&lt;/UILanguage&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/SetupUILanguage&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;InputLocale&gt;</span>fr-FR<span class="nt">&lt;/InputLocale&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;SystemLocale&gt;</span>fr-FR<span class="nt">&lt;/SystemLocale&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;UILanguage&gt;</span>fr-FR<span class="nt">&lt;/UILanguage&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;UILanguageFallback&gt;</span>fr-FR<span class="nt">&lt;/UILanguageFallback&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;UserLocale&gt;</span>fr-FR<span class="nt">&lt;/UserLocale&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/component&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&#34;Microsoft-Windows-Setup&#34;</span> <span class="na">processorArchitecture=</span><span class="s">&#34;amd64&#34;</span> <span class="na">publicKeyToken=</span><span class="s">&#34;31bf3856ad364e35&#34;</span> <span class="na">language=</span><span class="s">&#34;neutral&#34;</span> <span class="na">versionScope=</span><span class="s">&#34;nonSxS&#34;</span> <span class="na">xmlns:wcm=</span><span class="s">&#34;http://schemas.microsoft.com/WMIConfig/2002/State&#34;</span> <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;DiskConfiguration&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;WillShowUI&gt;</span>OnError<span class="nt">&lt;/WillShowUI&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;Disk</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;CreatePartitions&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;CreatePartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>1<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Size&gt;</span>500<span class="nt">&lt;/Size&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Type&gt;</span>Primary<span class="nt">&lt;/Type&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/CreatePartition&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;CreatePartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>2<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Size&gt;</span>100<span class="nt">&lt;/Size&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Type&gt;</span>EFI<span class="nt">&lt;/Type&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/CreatePartition&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;CreatePartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>3<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Size&gt;</span>16<span class="nt">&lt;/Size&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Type&gt;</span>MSR<span class="nt">&lt;/Type&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/CreatePartition&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;CreatePartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>4<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Type&gt;</span>Primary<span class="nt">&lt;/Type&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Extend&gt;</span>true<span class="nt">&lt;/Extend&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/CreatePartition&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/CreatePartitions&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;ModifyPartitions&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;ModifyPartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Format&gt;</span>NTFS<span class="nt">&lt;/Format&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Label&gt;</span>WinRE<span class="nt">&lt;/Label&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>1<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;PartitionID&gt;</span>1<span class="nt">&lt;/PartitionID&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;TypeID&gt;</span>DE94BBA4-06D1-4D40-A16A-BFD50179D6AC<span class="nt">&lt;/TypeID&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/ModifyPartition&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;ModifyPartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Format&gt;</span>FAT32<span class="nt">&lt;/Format&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Label&gt;</span>System<span class="nt">&lt;/Label&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>2<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;PartitionID&gt;</span>2<span class="nt">&lt;/PartitionID&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/ModifyPartition&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;ModifyPartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>3<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;PartitionID&gt;</span>3<span class="nt">&lt;/PartitionID&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/ModifyPartition&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;ModifyPartition</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Format&gt;</span>NTFS<span class="nt">&lt;/Format&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Label&gt;</span>Windows<span class="nt">&lt;/Label&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Letter&gt;</span>C<span class="nt">&lt;/Letter&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Order&gt;</span>4<span class="nt">&lt;/Order&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;PartitionID&gt;</span>4<span class="nt">&lt;/PartitionID&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/ModifyPartition&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/ModifyPartitions&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;DiskID&gt;</span>0<span class="nt">&lt;/DiskID&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;WillWipeDisk&gt;</span>true<span class="nt">&lt;/WillWipeDisk&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/Disk&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/DiskConfiguration&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;WindowsDeploymentServices&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;Login&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;Credentials&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Domain&gt;</span>wds.local<span class="nt">&lt;/Domain&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Password&gt;</span>1nfr@2022NG<span class="nt">&lt;/Password&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Username&gt;</span>Administrateur<span class="nt">&lt;/Username&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/Credentials&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/Login&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;ImageSelection&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;InstallImage&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Filename&gt;</span>install.wim<span class="nt">&lt;/Filename&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;ImageGroup&gt;</span>ImageGroup1<span class="nt">&lt;/ImageGroup&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;ImageName&gt;</span>Windows 10 Pro<span class="nt">&lt;/ImageName&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/InstallImage&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;InstallTo&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;DiskID&gt;</span>0<span class="nt">&lt;/DiskID&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;PartitionID&gt;</span>4<span class="nt">&lt;/PartitionID&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/InstallTo&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/ImageSelection&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/WindowsDeploymentServices&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/component&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/settings&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;settings</span> <span class="na">pass=</span><span class="s">&#34;oobeSystem&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&#34;Microsoft-Windows-International-Core&#34;</span> <span class="na">processorArchitecture=</span><span class="s">&#34;amd64&#34;</span> <span class="na">publicKeyToken=</span><span class="s">&#34;31bf3856ad364e35&#34;</span> <span class="na">language=</span><span class="s">&#34;neutral&#34;</span> <span class="na">versionScope=</span><span class="s">&#34;nonSxS&#34;</span> <span class="na">xmlns:wcm=</span><span class="s">&#34;http://schemas.microsoft.com/WMIConfig/2002/State&#34;</span> <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;InputLocale&gt;</span>fr-FR<span class="nt">&lt;/InputLocale&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;SystemLocale&gt;</span>fr-FR<span class="nt">&lt;/SystemLocale&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;UILanguage&gt;</span>fr-FR<span class="nt">&lt;/UILanguage&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;UILanguageFallback&gt;</span>fr-FR<span class="nt">&lt;/UILanguageFallback&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;UserLocale&gt;</span>fr-FR<span class="nt">&lt;/UserLocale&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/component&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;component</span> <span class="na">name=</span><span class="s">&#34;Microsoft-Windows-Shell-Setup&#34;</span> <span class="na">processorArchitecture=</span><span class="s">&#34;amd64&#34;</span> <span class="na">publicKeyToken=</span><span class="s">&#34;31bf3856ad364e35&#34;</span> <span class="na">language=</span><span class="s">&#34;neutral&#34;</span> <span class="na">versionScope=</span><span class="s">&#34;nonSxS&#34;</span> <span class="na">xmlns:wcm=</span><span class="s">&#34;http://schemas.microsoft.com/WMIConfig/2002/State&#34;</span> <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;OOBE&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;HideEULAPage&gt;</span>true<span class="nt">&lt;/HideEULAPage&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;HideLocalAccountScreen&gt;</span>true<span class="nt">&lt;/HideLocalAccountScreen&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;HideOEMRegistrationScreen&gt;</span>true<span class="nt">&lt;/HideOEMRegistrationScreen&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;HideOnlineAccountScreens&gt;</span>true<span class="nt">&lt;/HideOnlineAccountScreens&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;HideWirelessSetupInOOBE&gt;</span>true<span class="nt">&lt;/HideWirelessSetupInOOBE&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;ProtectYourPC&gt;</span>1<span class="nt">&lt;/ProtectYourPC&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/OOBE&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;UserAccounts&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;AdministratorPassword&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;Value&gt;</span>MQBuAGYAcgBAADIAMAAyADIATgBHAEEAZABtAGkAbgBpAHMAdAByAGEAdABvAHIAUABhAHMAcwB3AG8AcgBkAA==<span class="nt">&lt;/Value&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;PlainText&gt;</span>false<span class="nt">&lt;/PlainText&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/AdministratorPassword&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;LocalAccounts&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;LocalAccount</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Password&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Value&gt;</span>MQBuAGYAcgBAADIAMAAyADIATgBHAFAAYQBzAHMAdwBvAHIAZAA=<span class="nt">&lt;/Value&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;PlainText&gt;</span>false<span class="nt">&lt;/PlainText&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/Password&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;DisplayName&gt;</span>adissoir<span class="nt">&lt;/DisplayName&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Group&gt;</span>Administrateurs<span class="nt">&lt;/Group&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Name&gt;</span>adissoir<span class="nt">&lt;/Name&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/LocalAccount&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/LocalAccounts&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;DomainAccounts&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;DomainAccountList</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;Domain&gt;</span>wds.local<span class="nt">&lt;/Domain&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;DomainAccount</span> <span class="na">wcm:action=</span><span class="s">&#34;add&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Group&gt;</span>Administrateurs<span class="nt">&lt;/Group&gt;</span>
</span></span><span class="line"><span class="cl">                            <span class="nt">&lt;Name&gt;</span>adissoir<span class="nt">&lt;/Name&gt;</span>
</span></span><span class="line"><span class="cl">                        <span class="nt">&lt;/DomainAccount&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;/DomainAccountList&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/DomainAccounts&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/UserAccounts&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;AutoLogon&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;Password&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;Value&gt;</span>MQBuAGYAcgBAADIAMAAyADIATgBHAFAAYQBzAHMAdwBvAHIAZAA=<span class="nt">&lt;/Value&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="nt">&lt;PlainText&gt;</span>false<span class="nt">&lt;/PlainText&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;/Password&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;Domain&gt;</span>wds.local<span class="nt">&lt;/Domain&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;Enabled&gt;</span>true<span class="nt">&lt;/Enabled&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nt">&lt;Username&gt;</span>adissoir<span class="nt">&lt;/Username&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;/AutoLogon&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/component&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/settings&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;cpi:offlineImage</span> <span class="na">cpi:source=</span><span class="s">&#34;wim:c:/users/olivier/d/iso/windows_10_pro_cefim_21h2_fev22/sources/install.wim#Windows 10 Pro&#34;</span> <span class="na">xmlns:cpi=</span><span class="s">&#34;urn:schemas-microsoft-com:cpi&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/unattend&gt;</span>
</span></span></code></pre></div><h3 id="ajour-du-fichier-de-réponse-à-wds">Ajour du fichier de réponse à WDS</h3>
<ul>
<li>
<p>Copier le fichier dans le dossier <strong><code>RemoteInstall</code></strong> du serveur WDS.</p>
</li>
<li>
<p>Depuis la console faire un clic droit sur le serveur et cliquer sur <code>Propriétés</code> &gt; onglet <code>Client</code> et ajouter le fichier de réponse aux 2 sections de l&rsquo;architecture adéquate (x86 ou x64) normale et UEFI. Puis Valider.</p>
</li>
</ul>
<p>
<a href="#image-a1bd0d22ebb0cf90455beab00eef9425" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/03_1_Propri%C3%A9t%C3%A9s_WDS_Clients.png" alt="Propriétés_WDS_Clients" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-a1bd0d22ebb0cf90455beab00eef9425">
<img src="../../../at3/at3e1/wds-mdt/03_1_Propri%C3%A9t%C3%A9s_WDS_Clients.png" alt="Propriétés_WDS_Clients" class="lightbox-image" loading="lazy">
</a></p>
<ul>
<li>Clique droit sur l&rsquo;image et <code>Propriétés</code>. Sélectionner <code>Autoriser l'image à s'installer en mode sans assistance</code> et <code>Selectionner un fichier...</code> pour indiquer le fichier de réponse. Valider.</li>
</ul>
<p>
<a href="#image-387c07edb28e23b97d844a9f977c7e8b" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/03_2_Propri%C3%A9t%C3%A9s_Image.png" alt="Propriétés_Image" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-387c07edb28e23b97d844a9f977c7e8b">
<img src="../../../at3/at3e1/wds-mdt/03_2_Propri%C3%A9t%C3%A9s_Image.png" alt="Propriétés_Image" class="lightbox-image" loading="lazy">
</a></p>
<blockquote>
<p>Tester le fichier de réponse</p>
</blockquote>
<hr>
<h3 id="ajout-de-pilotes-pour-des-machines-réelleshttpsrdr-itcomwds-installation-et-configuration9"><a href="https://rdr-it.com/wds-installation-et-configuration/9/" target="_blank">Ajout de pilotes pour des machines réelles</a></h3>
<hr>
<h2 id="créer-une-image-de-capture">Créer une image de capture</h2>
<p>Pour créer une capture d&rsquo;une VM existante, il faut préparer le serveur et la machine à capturer.</p>
<p><em><code>Sur le serveur WDS</code></em> :</p>
<p>Ajouter une image de capture (boot) sur le serveur :</p>
<p>Cliquer droit sur l&rsquo;image de boot créée précédemment et choisir <strong>Créer une image de capture&hellip;</strong> ; lui donner un nom (capture), une description et lui indiquer le chemin du dossier partagé du serveur et un nom de fichier : <code>D:\RemoteInstall\WdsClientUnattend\capture.wim</code>.</p>
<p>
<a href="#image-aaec8d8df8530f753223b655c14326cf" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/04_capture_wim.png" alt="capture.wim" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-aaec8d8df8530f753223b655c14326cf">
<img src="../../../at3/at3e1/wds-mdt/04_capture_wim.png" alt="capture.wim" class="lightbox-image" loading="lazy">
</a></p>
<p>
<a href="#image-aaef069e9de39c8f6f8b7317cb8e325d" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/05_capture_image_boot.png" alt="capture_image_boot.png" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-aaef069e9de39c8f6f8b7317cb8e325d">
<img src="../../../at3/at3e1/wds-mdt/05_capture_image_boot.png" alt="capture_image_boot.png" class="lightbox-image" loading="lazy">
</a></p>
<p><em><code>Sur la machine à capturer</code></em> :</p>
<ul>
<li>
<p>Aller dans le dossier <code>C:\Windows\system32\sysprep</code> et exécuter <code>sysprep.exe</code></p>
</li>
<li>
<p>Dans la fenêtre de sysprep, sélectionner <strong>Audit</strong> et <strong>ne pas cocher Generalize</strong>, et <strong>Redémarrer</strong> puis Valider.</p>
</li>
</ul>
<p>Sysprep prépare la machine puis la reboot. Une fois redémarrée, installer sur la machine les logiciels à intégrer à l&rsquo;image qui sera capturée.</p>
<p>Une fois tous les logiciels souhaités installés, relancer l&rsquo;outil <code>sysprep</code> en choisissant <strong>OOBE</strong>, <strong>Generalize</strong> et <strong>Eteindre</strong> (<code>ne pas choisir redémarrer</code> ici, car la machine devra booter en PXE au prochain démarrage).</p>
<ul>
<li>À la fin de l&rsquo;opération, la machine doit s&rsquo;éteindre. La redémarrer en forçant le boot sur le firmware (BIOS/UEFI - avec l&rsquo;option de démarrage <code>Power On to Firmware</code> de VMWare), et choisir le démarrage <code>Network</code> (PXE) pour que le serveur puisse l&rsquo;intercepter.</li>
</ul>
<p>Si demandé durant le boot PXE, appuyer sur F12 ou Entrée puis choisir l&rsquo;option de boot <strong>capture</strong>.</p>
<p>L&rsquo;Assistant de Capture d&rsquo;image des services de déploiement Windows affiche une fenêtre de démarrage, cliquer <code>Suivant &gt;</code>.</p>
<ul>
<li>
<p>1 - <code>Répertoire à capturer</code></p>
<ul>
<li>Volume : <strong>C:\</strong></li>
<li>Nom de l&rsquo;image : Un nom pour l&rsquo;image capturée (<strong>win10master</strong>)</li>
<li>Description de l&rsquo;image (<strong>Windows 10 - Master</strong>)</li>
<li>Cliquer <code>Suivant &gt;</code></li>
</ul>
</li>
<li>
<p>2 - <code>Nouvel emplacement de l'image</code></p>
<ul>
<li>Nom et emplacement : Parcourir : <strong>C:\Users\Public\Documents\</strong> et <code>win10master</code> (.wim automatiquement ajouté).</li>
<li><strong>Cocher</strong> Charger l&rsquo;image sur un serveur[&hellip;]</li>
<li>Nom du serveur : Le nom ou l&rsquo;adresse IP du serveur (<strong>winsrv22wds</strong>) puis <code>Connexion</code>
Se rendre sur le serveur &gt; AD Utilisateurs et Ordinateurs et Propriétés de l&rsquo;utilisateur <code>Administrateur</code>, onglet Compte : indiquer <strong>administrateur</strong> et domaine (<strong>wds.local</strong>) puis valider
<ul>
<li>Nom d&rsquo;utilisateur : <strong><a href="mailto:administrateur@wds.local">administrateur@wds.local</a></strong></li>
<li>Mot de passe : Le mote de passe de l&rsquo;administrateur du serveur</li>
<li><code>OK</code></li>
</ul>
</li>
<li>Si la connexion réussit, les groupes d&rsquo;images du serveur sont chargés dans la liste déroulante : choisir celle souhaitée.</li>
<li>Cliquer <code>Suivant &gt;</code></li>
</ul>
</li>
<li>
<p>3 - La capture de l&rsquo;image démarre</p>
</li>
<li>
<p>4 - Une fois terminé, Cliquer <code>Terminer</code></p>
</li>
</ul>
<p>
<a href="#image-5960235f06e3e26ef966df310e606efc" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/07_machine_capture.png" alt="machine_capture" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-5960235f06e3e26ef966df310e606efc">
<img src="../../../at3/at3e1/wds-mdt/07_machine_capture.png" alt="machine_capture" class="lightbox-image" loading="lazy">
</a></p>
<p>La machine redémarre et la nouvelle image d&rsquo;installation apparaît dans le groupe choisi du Gestionnaire WDS sur le serveur.</p>
<p>Il ne reste plus qu&rsquo;à lui créer son propre fichier de réponse à partir d&rsquo;une copie du 1er ficher dont on modifie uniquement les propriétés propres à l&rsquo;image WDS (Nom, Groupe et Nom de fichier), copier de xml sur le serveur dans <code>RemoteInstall\WdsClientUnattend\</code> et l&rsquo;affecter à la nouvelle image par ses propriétés.</p>
<p>
<a href="#image-2cad7425c1dc5296d6cf96b4416ffaa2" class="lightbox-link">
<img src="../../../at3/at3e1/wds-mdt/08_capture_ready_to_deploy.png" alt="capture_ready_to_deploy" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-2cad7425c1dc5296d6cf96b4416ffaa2">
<img src="../../../at3/at3e1/wds-mdt/08_capture_ready_to_deploy.png" alt="capture_ready_to_deploy" class="lightbox-image" loading="lazy">
</a></p>
<p>Lors du prochain déploiement, une nouvelle fenêtre apparaitra permettant de choisir l&rsquo;image à déployer et proposant notre image nouvellement crée. Si le fichier de réponse est correct, l&rsquo;installation se poursuivra sans intervention jusqu&rsquo;au 1er login du système.</p>
<hr>
<h2 id="ajout-de-logiciel-via-une-gpo-dans-ad">Ajout de logiciel via une GPO dans AD</h2>
<p>Il faut, en 1er lieu, intégrer la machine au domaine, et la placer dans une UO (par ex : <code>Ordinateurs</code>). Puis créer un dossier partagé accessible à tous les ordinateurs du domaine et tous les utilisateurs du domaine en Lecture et y placer le logiciel à déployer.</p>
<p>Dans la console Gestion des stratégies de groupe, créer une nouvelle GPO sur cette UO :
Configuration ordinateur/Stratégies/Paramètres du logiciel/ clique droit sur Installation de logiciel &gt; Nouveau &gt; Package&hellip;</p>
<p>Indiquer l&rsquo;emplacement du logiciel <strong>sur le réseau</strong> (ex : \WINSRV22WDS\Share) puis à l&rsquo;onglet <code>Déploiement</code> indiquer le type <strong>Attribué</strong>. Valider et fermer le gestionnaire de GPO.</p>
<p>Patienter quelques minutes, le logiciel devrait s&rsquo;installer sur les postes présents dans l&rsquo;UO concernée.</p>
<p><em>Il est toujours possible de forcer la mise à jour des stratégies via un terminal sur le poste client :</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">gpupdate /Force
</span></span></code></pre></div><hr>
<h1 id="mdt">MDT</h1>
<h2 id="microsoft-deployment-toolkit">Microsoft Deployment Toolkit</h2>
<h2 id="1-déployer-windows-avec-wds-et-mdthttpsrdr-itcomdeployer-windows-avec-mdt-et-wds">1. <a href="https://rdr-it.com/deployer-windows-avec-mdt-et-wds/" target="_blank">Déployer Windows avec WDS et MDT</a></h2>
<h2 id="2-mdt--utilisation-avec-une-base-de-donnéeshttpsrdr-itcommdt-utilisation-base-de-donnees">2. <a href="https://rdr-it.com/mdt-utilisation-base-de-donnees/" target="_blank">MDT : utilisation avec une base de données</a></h2>
<h2 id="3-mdt-installation-des-applications-lors-du-déploiement-de-windowshttpsrdr-itcommdt-installation-des-applications-lors-du-deploiement-de-windows">3. <a href="https://rdr-it.com/mdt-installation-des-applications-lors-du-deploiement-de-windows/" target="_blank">MDT installation des applications lors du déploiement de Windows</a></h2>
<h2 id="4-mdt--personnaliser-les-fenetres-de-lassistant-winpe-ltihttpsrdr-itcommdt-personnaliser-les-fenetres-de-lassistant-winpe-lti">4. <a href="https://rdr-it.com/mdt-personnaliser-les-fenetres-de-lassistant-winpe-lti/" target="_blank">MDT : personnaliser les fenetres de l’assistant WinPE (LTI)</a></h2>
<hr>
<h2 id="les-bonnes-pratiques-itil-lors-de-vos-déploiementshttpsopenclassroomscomfrcourses2013451-mettez-en-place-les-bonnes-pratiques-itil-lors-de-vos-deploiements"><a href="https://openclassrooms.com/fr/courses/2013451-mettez-en-place-les-bonnes-pratiques-itil-lors-de-vos-deploiements" target="_blank">Les bonnes pratiques ITIL lors de vos déploiements</a></h2>
<hr>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
  </body>
</html>
